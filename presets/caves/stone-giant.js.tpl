const MapRows = [
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  "................................................................"
  ".......................######................##................."
  ".......................#....#...........###....................."
  ".......................##..##................##................."
  "........................#..#...................................."
  "........................#..#...................................."
  "......................................##........................"
  ".......##.#.##.............#######.............................."
  ".........#.#.....##............................................."
  "............##..................##....##........................"
  "................###............................................."
  "................#.........##....##...........##................."
  "...............##..............................................."
  "...................................##........##................."
  ".......................##......................................."
  "................................##.............................."
  "....................##.......##..............##................."
  ".................##............................................."
  "...........................##..........##......................."
  "................................................................"
  "...................................##..........................."
  "................................................................"
  "................................................................"
  "................................................................"
];

const Cave = {
  stoneGray: "#666",
  mudWall: "#999900",
  pitBlack: "#000",
  goblinSkin: "#44cc33",
  goblinStripe: "#449933",
  stoneGiant: "#33ff00"
}

const FloorTile = (char, fg, bg) => ({ char, fg, bg, blocking: false })
const WallTile = (char, fg, bg) => ({ char, fg, bg, blocking: true })

const TileSet = {
  ".": FloorTile(".", Cave.stoneGray, Cave.pitBlack),
  "#": WallTile("#", Cave.mudWall, Cave.pitBlack)
}

function generateLevel() {
  const characterMap = MapRows.map(row => row.split(""));
  const tileMap = [];

  for (let y = 0; y < characterMap.length; y++) {
    for (let x = 0; x < characterMap[0].length; x++) {
      tileMap.push(TileSet[characterMap[y][x]])
    }
  }

  return tileMap;
}

const Monster = (name, char, fg, health, damage) => (
  { name, char, fg, health, damage, hostile: true,  }
);

const StoneGiant = Monster("stone giant", "Å¸", Cave.stoneGiant, 200, "3d6");
const Kobold = Monster("kobold", "k", Cave.goblinSkin, 50, "1d4");
const KoboldMaster = Monster("kobold master", "k", Cave.goblinStripe, 50, "1d6");

const Encounter = (x, y, monster) => (
  { x, y, current: { health: monster.health }, monster }
);

function generateEntities() {
  return [
    Encounter(34, 31, StoneGiant),
    Encounter(10, 7, Kobold),
    Encounter(51, 6, Kobold),
    Encounter(53, 5, KoboldMaster),
  ];
}

export {
  generateLevel,
  generateEntities
}
